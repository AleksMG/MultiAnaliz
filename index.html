<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Cipher Breaker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Шапка приложения -->
        <header class="app-header">
            <div class="header-content">
                <h1>
                    <i class="fas fa-lock-open"></i> 
                    <span class="app-title">CipherBreaker Pro</span>
                    <span class="app-version">v2.1.0</span>
                </h1>
                <div class="app-controls">
                    <button id="settings-btn" class="icon-btn" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="docs-btn" class="icon-btn" title="Documentation">
                        <i class="fas fa-book"></i>
                    </button>
                </div>
            </div>
            <div class="sample-toolbar">
                <div class="sample-buttons">
                    <button id="load-k4" class="sample-btn">
                        <i class="fas fa-project-diagram"></i> Kryptos K4
                    </button>
                    <button id="load-zodiac" class="sample-btn">
                        <i class="fas fa-user-secret"></i> Zodiac-340
                    </button>
                    <button id="load-custom" class="sample-btn">
                        <i class="fas fa-file-upload"></i> Custom
                    </button>
                </div>
                <div class="preset-selector">
                    <select id="cipher-preset" class="preset-dropdown">
                        <option value="auto">Auto Detect</option>
                        <option value="vigenere">Vigenère</option>
                        <option value="transposition">Transposition</option>
                        <option value="k4">Kryptos K4</option>
                        <option value="xor">XOR</option>
                        <option value="polybius">Polybius</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Основная рабочая область -->
        <main class="app-main">
            <!-- Панель ввода -->
            <section class="input-panel">
                <div class="panel-header">
                    <h2><i class="fas fa-keyboard"></i> Input</h2>
                    <div class="text-controls">
                        <button id="clear-btn" class="text-btn">
                            <i class="fas fa-trash-alt"></i> Clear
                        </button>
                        <button id="format-btn" class="text-btn">
                            <i class="fas fa-align-left"></i> Format
                        </button>
                    </div>
                </div>
                <textarea id="ciphertext" class="cipher-input" placeholder="Paste your ciphertext here..."></textarea>
                <div class="analysis-controls">
                    <div class="options-group">
                        <label class="option-checkbox">
                            <input type="checkbox" id="deep-scan" checked>
                            <span class="checkmark"></span>
                            Deep Scan
                        </label>
                        <label class="option-checkbox">
                            <input type="checkbox" id="use-nlp" checked>
                            <span class="checkmark"></span>
                            NLP Validation
                        </label>
                        <label class="option-checkbox">
                            <input type="checkbox" id="save-results">
                            <span class="checkmark"></span>
                            Save Results
                        </label>
                    </div>
                    <button id="analyze-btn" class="analyze-button">
                        <i class="fas fa-rocket"></i>
                        <span class="btn-text">Analyze</span>
                        <span class="loading-dots"></span>
                    </button>
                </div>
            </section>

            <!-- Панель результатов -->
            <section class="results-panel">
                <div class="results-header">
                    <h2><i class="fas fa-chart-bar"></i> Analysis Results</h2>
                    <div class="results-tabs">
                        <button class="tab-btn active" data-tab="summary">Summary</button>
                        <button class="tab-btn" data-tab="layers">Layers</button>
                        <button class="tab-btn" data-tab="visualization">Visualization</button>
                        <button class="tab-btn" data-tab="full-report">Full Report</button>
                    </div>
                </div>

                <div class="tab-content active" id="summary-tab">
                    <div class="summary-card">
                        <div class="summary-header">
                            <h3>Best Guess</h3>
                            <div class="confidence-badge high">
                                <i class="fas fa-certificate"></i>
                                <span>85% Confidence</span>
                            </div>
                        </div>
                        <div class="best-guess-result">
                            "EASTNORTHEAST BERLIN CLOCK TOWER"
                        </div>
                        <div class="summary-details">
                            <div class="detail-item">
                                <span class="detail-label">Method:</span>
                                <span class="detail-value">Vigenère + Transposition</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Key Found:</span>
                                <span class="detail-value">KRYPTOS</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Time:</span>
                                <span class="detail-value">2.14s</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="layers-tab">
                    <div class="layer-list" id="layer-container">
                        <!-- Layers will be inserted here by JavaScript -->
                    </div>
                </div>

                <div class="tab-content" id="visualization-tab">
                    <div class="visualization-grid">
                        <div class="matrix-visualization">
                            <h3>Transposition Matrix</h3>
                            <div class="matrix-container" id="matrix-view"></div>
                            <div class="matrix-controls">
                                <input type="number" id="matrix-size" min="2" max="20" value="8">
                                <button id="redraw-matrix">Redraw</button>
                            </div>
                        </div>
                        <div class="frequency-visualization">
                            <h3>Frequency Analysis</h3>
                            <canvas id="frequency-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="full-report-tab">
                    <div class="report-container">
                        <pre id="json-report"></pre>
                    </div>
                </div>
            </section>
        </main>

        <!-- Статус бар -->
        <footer class="app-footer">
            <div class="status-bar">
                <div class="status-item">
                    <i class="fas fa-microchip"></i>
                    <span id="cpu-status">Ready</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-clock"></i>
                    <span id="time-status">00:00:00</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-database"></i>
                    <span id="memory-status">0.2MB</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Модальные окна -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2><i class="fas fa-cog"></i> Settings</h2>
            <!-- Настройки будут здесь -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="core.js"></script>
</body>
</html>
